<!DOCTYPE html>
<html>

<head>
    <title>é«˜æ€ç¦ï¼Œç”Ÿæ—¥å¿«ä¹å‘€ï¼</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="images/heart.png" type="image/x-icon">
    <style>
        html,
        body {
            height: 100%;
            padding: 0;
            margin: 0;
            background: #000;
        }

        canvas {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .title {
            width: 20%;
            /* æ–‡å­—å±…ä¸­ */
            text-align: center;
            /* å­—ä½“å¤§å° */
            font-size: 30px;
            /* èƒŒæ™¯é¢œè‰² */
            background-color: transparent;
            /* æ–‡å­—é¢œè‰² */
            color: rgba(247, 110, 206, 0.829);
            /* å·¦å³å±…ä¸­ */
            margin: auto;
            /* å®šä½ */
            position: relative;
            /* ä¸Šè¾¹è· */
            top: 46%;
            /* å­—ä½“ */
            font-family: "Microsoft YaHei";
            cursor: pointer;
        }

        /* å¼¹å¹•å®¹å™¨ */
        .danmu-container {
            position: absolute;
            width: 100%;
            height: 30%;
            top: 10px;
            overflow: hidden;
            pointer-events: none;
        }

        /* å¼¹å¹•æ–‡å­—æ ·å¼ */
        .danmu {
            position: absolute;
            white-space: nowrap;
            font-size: 1.5em;
            font-family: "Microsoft YaHei", "é»‘ä½“", "å®‹ä½“", sans-serif;
            animation: scroll-left 10s linear forwards;
        }

        /* å½©è›‹å¼¹å¹•æ–‡å­—æ ·å¼ */
        .Interestdanmu {
            color: gold;
            text-shadow: 0 0 10px gold, 0 0 20px gold, 0 0 30px #ffcc00, 0 0 40px #ffcc00, 0 0 50px #ffcc00, 0 0 75px #ffcc00;
            position: absolute;
            white-space: nowrap;
            font-size: 1.5em;
            font-family: "Microsoft YaHei", "é»‘ä½“", "å®‹ä½“", sans-serif;
            animation: scroll-right 8s linear forwards;
            pointer-events: auto;
            z-index: 9999;
            cursor: pointer;
        }

        @media(min-width: 1160px) {
            .danmu {
                font-size: 1.8em;
                animation: scroll-left 15s linear forwards;
            }

            .Interestdanmu {
                font-size: 1.8em;
                animation: scroll-right 13s linear forwards;
            }
        }

        /* æ™®é€šå¼¹å¹•åŠ¨ç”»æ•ˆæœ */
        @keyframes scroll-left {
            from {
                left: 100%;
            }

            to {
                left: -100%;
            }
        }

        /* å½©è›‹å¼¹å¹•ä»å·¦åˆ°å³åŠ¨ç”» */
        @keyframes scroll-right {
            from {
                right: 100%;
            }

            to {
                right: -100%;
            }
        }
    </style>

</head>

<body>
    <div class="danmu-container"></div> <!-- å¼¹å¹•å®¹å™¨ -->
    <canvas id="pinkboard"></canvas>
    <div class="title">ç¦å¨ï¼Œç”Ÿæ—¥å¿«ä¹ï¼</div>
    <audio id="audioPlayer" loop>
        ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ audio æ ‡ç­¾ã€‚
    </audio>
</body>

<script defer>
    const danmuContainer = document.querySelector('.danmu-container');

    // å¼¹å¹•å†…å®¹
    const messages = [
        "ç”Ÿæ—¥å¿«ä¹å‘€ï¼ğŸ‰&nbsp;â€”â€”yiqi",
        "æ„¿ä½ æ°¸è¿œå¼€å¿ƒï¼ğŸ˜Š&nbsp;&nbsp;&nbsp;&nbsp;--yiqi",
        "ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼ğŸ“š&nbsp;&nbsp;&nbsp;&nbsp;--yiqi",
        "æ¯å¤©éƒ½è¦ç¾ç¾çš„ï¼ğŸ’–&nbsp;&nbsp;&nbsp;&nbsp;--yiqi",
        "æ–°çš„å²æœˆï¼Œæ–°çš„å¹¸è¿ï¼ğŸŒŸ&nbsp;&nbsp;&nbsp;&nbsp;--yiqi"
    ];
    const Console_easter_egg = [
        "å ä½",
        "æŸ’æŸ’ï¼Œæ„¿ä½ å¹¸ç¦å¦‚å½±éšå½¢ï¼Œå¼€å¿ƒæ— éœ€åŸå› ï¼Œæ¯å¤©ç¬‘å£å¸¸å¼€ï¼Œå¿ƒæƒ…æ„‰æ‚¦~ğŸ˜ŠğŸŒˆğŸ’–",
        "æŸ’æŸ’ï¼Œä¸–ç•Œè™½å¤§ï¼Œæœ‰æ¢¦å°±ä¸æ€•ï¼Œç¥ä½ ä¹˜é£ç ´æµªï¼ğŸš€ğŸŒŠâœ¨",
        "æŸ’æŸ’ï¼Œæ„¿ä½ è„šæ­¥è½»ç›ˆï¼Œæ¯ä¸€å¤©éƒ½æ­¥æ­¥ç”ŸèŠ±ã€‚ğŸŒ¸ğŸ’ƒğŸŒŸ"
    ]
    // å·²ç»ç”Ÿæˆçš„å¼¹å¹•æ•°
    let count = 1;
    let intervalId;

    // ç¤¼èŠ±å½©å¸¦çš„é¢œè‰²æ•°ç»„
    const fireworkColors = [
        'red', 'blue', 'green', 'yellow', 'purple', 'pink', 'orange', 'cyan', 'lime', 'gold'
    ];

    // ç”Ÿæˆéšæœºé¢œè‰²
    function getRandomFireworkColor() {
        return fireworkColors[Math.floor(Math.random() * fireworkColors.length)];
    }

    // ç”Ÿæˆéšæœºå¼¹å¹•
    function createDanmu() {
        //  æ¯æŸ’æ¡ï¼Œå‡ºç°ä¸€æ¡ä»å·¦å‘å³é£˜çš„å½©è›‹å¼¹å¹•
        if (count % 7 === 0) {
            const InterestDanmu = document.createElement('div');
            InterestDanmu.className = 'Interestdanmu';
            InterestDanmu.innerHTML = 'èœèœï¼šæŸ’æŸ’ï¼Œç”Ÿæ—¥å¿«ä¹å“‡ï¼';
            InterestDanmu.style.top = '70%';
            InterestDanmu.style.right = '100%';
            danmuContainer.appendChild(InterestDanmu);
            // ç›‘å¬å½©è›‹å¼¹å¹•ç‚¹å‡»äº‹ä»¶
            InterestDanmu.addEventListener('click', () => {
                InterestDanmuClick();
            })
            // ç›‘å¬åŠ¨ç”»ç»“æŸäº‹ä»¶ï¼Œç§»é™¤å¼¹å¹•
            InterestDanmu.addEventListener('animationend', () => {
                danmuContainer.removeChild(InterestDanmu);
            });
            console.log(Console_easter_egg[count / 7]);
            count++;  // æ›´æ–°è®¡æ•°
            return;

        }
        // å¦‚æœå·²ç»ç”Ÿæˆäº†21æ¡å¼¹å¹•ï¼Œæ¸…é™¤å®šæ—¶å™¨å¹¶åœ¨10ç§’åé‡æ–°å¼€å§‹
        if (count > 21) {
            clearInterval(intervalId);
            setTimeout(() => {
                count = 1;  // é‡ç½®è®¡æ•°
                intervalId = setInterval(createDanmu, 1000);  // é‡æ–°å¼€å§‹ç”Ÿæˆå¼¹å¹•
            }, 10000);  // 10ç§’åé‡æ–°å¯åŠ¨ç”Ÿæˆ
            console.log('----------------------------It is both an ending and a beginning.----------------------------');
            return;
        }
        // å½“è®¡æ•°å°‘äº21æ—¶ï¼Œç»§ç»­ç”Ÿæˆå¼¹å¹•
        const danmu = document.createElement('div');
        danmu.className = 'danmu';
        danmu.innerHTML = messages[Math.floor(Math.random() * messages.length)];
        danmu.style.top = `${Math.random() * 70}%`;
        danmu.style.left = '100%';

        // è®¾ç½®æ™®é€šå¼¹å¹•çš„éšæœºé¢œè‰²ï¼ˆæ¨¡æ‹Ÿç¤¼èŠ±å½©å¸¦æ•ˆæœï¼‰
        danmu.style.color = getRandomFireworkColor();
        danmuContainer.appendChild(danmu);

        // ç›‘å¬åŠ¨ç”»ç»“æŸäº‹ä»¶ï¼Œç§»é™¤å¼¹å¹•
        danmu.addEventListener('animationend', () => {
            danmuContainer.removeChild(danmu);
        });
        console.log(count);
        count++;  // æ›´æ–°è®¡æ•°
    }

    // å¼€å§‹ç”Ÿæˆå¼¹å¹•
    intervalId = setInterval(createDanmu, 1000);

    // å½©è›‹å¼¹å¹•ç‚¹å‡»å‡½æ•°
    function InterestDanmuClick() {
        alert("å‘¦å‘µï¼Œè¢«ä½ å‘ç°äº†è¿™ä¸ªå¼¹å¹•ä¸ä¸€èˆ¬ğŸ˜ã€‚ç‚¹çš„å¾ˆå¥½ï¼Œä½†æ˜¯æ²¡ä»€ä¹ˆç”¨ğŸ˜œï¼Œå˜¿å˜¿ ğŸ˜");
        alert("å˜¿å˜¿å˜¿ï¼Œåˆ«ç€æ€¥åæ§½æˆ‘ï¼Œå¼€ä¸ªç©ç¬‘å˜›ğŸ˜†ğŸ˜†ğŸ˜†")
        // è·³è½¬åˆ°cake.htmlé¡µé¢
        window.location.href = "cake.html";
    }
    // è‡ªåŠ¨å¼€å§‹æ’­æ”¾éŸ³ä¹
    fileURL = './audio/';
    const promise = fetch("./audio/Love Story.-Taylor Swift.mp3")
        .then(response => {
            // æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ
            if (!response.ok) {
                throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
            }
            // è·å–éŸ³é¢‘çš„ Blob æ•°æ®
            return response.blob();
        })
        .then(blob => {
            // ä½¿ç”¨Blobåˆ›å»ºURL
            const audioURL = URL.createObjectURL(blob);

            // è·å–audioå…ƒç´ å¹¶è®¾ç½®src
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.src = audioURL;

            // æ’­æ”¾éŸ³é¢‘
            audioPlayer.play().catch(error => {
                console.log('æ’­æ”¾å¤±è´¥:', error);
            });
        })
        .catch(error => {
            console.log('å‘ç”Ÿé”™è¯¯:', error);
        });
</script>

<script src="js/index.js" defer></script>

</html>